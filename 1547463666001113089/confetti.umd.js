(function(O,I){typeof exports=="object"&&typeof module!="undefined"?module.exports=I():typeof define=="function"&&define.amd?define(I):(O=typeof globalThis!="undefined"?globalThis:O||self,O.Confetti=I())})(this,function(){"use strict";var O=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function I(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),t}var K={},B={};(function e(t,n,i,a){var u=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL);function c(){}function s(o){var r=n.exports.Promise,p=r!==void 0?r:t.Promise;return typeof p=="function"?new p(o):(o(c,c),null)}var h=function(){var o=Math.floor(16.666666666666668),r,p,f={},v=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(r=function(y){var d=Math.random();return f[d]=requestAnimationFrame(function m(b){v===b||v+o-1<b?(v=b,delete f[d],y()):f[d]=requestAnimationFrame(m)}),d},p=function(y){f[y]&&cancelAnimationFrame(f[y])}):(r=function(y){return setTimeout(y,o)},p=function(y){return clearTimeout(y)}),{frame:r,cancel:p}}(),w=function(){var o,r,p={};function f(v){function y(d,m){v.postMessage({options:d||{},callback:m})}v.init=function(m){var b=m.transferControlToOffscreen();v.postMessage({canvas:b},[b])},v.fire=function(m,b,P){if(r)return y(m,null),r;var C=Math.random().toString(36).slice(2);return r=s(function(x){function S(g){g.data.callback===C&&(delete p[C],v.removeEventListener("message",S),r=null,P(),x())}v.addEventListener("message",S),y(m,C),p[C]=S.bind(null,{data:{callback:C}})}),r},v.reset=function(){v.postMessage({reset:!0});for(var m in p)p[m](),delete p[m]}}return function(){if(o)return o;if(!i&&u){var v=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{o=new Worker(URL.createObjectURL(new Blob([v])))}catch(y){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("\u{1F38A} Could not load worker",y),null}f(o)}return o}}(),ze={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function qe(o,r){return r?r(o):o}function Ve(o){return o!=null}function _(o,r,p){return qe(o&&Ve(o[r])?o[r]:ze[r],p)}function He(o){return o<0?0:Math.floor(o)}function Ye(o,r){return Math.floor(Math.random()*(r-o))+o}function Y(o){return parseInt(o,16)}function Ze(o){return o.map(Xe)}function Xe(o){var r=String(o).replace(/[^0-9a-f]/gi,"");return r.length<6&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),{r:Y(r.substring(0,2)),g:Y(r.substring(2,4)),b:Y(r.substring(4,6))}}function Ge(o){var r=_(o,"origin",Object);return r.x=_(r,"x",Number),r.y=_(r,"y",Number),r}function Je(o){o.width=document.documentElement.clientWidth,o.height=document.documentElement.clientHeight}function Ke(o){var r=o.getBoundingClientRect();o.width=r.width,o.height=r.height}function Qe(o){var r=document.createElement("canvas");return r.style.position="fixed",r.style.top="0px",r.style.left="0px",r.style.pointerEvents="none",r.style.zIndex=o,r}function et(o,r,p,f,v,y,d,m,b){o.save(),o.translate(r,p),o.rotate(y),o.scale(f,v),o.arc(0,0,1,d,m,b),o.restore()}function tt(o){var r=o.angle*(Math.PI/180),p=o.spread*(Math.PI/180);return{x:o.x,y:o.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:o.startVelocity*.5+Math.random()*o.startVelocity,angle2D:-r+(.5*p-Math.random()*p),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:o.color,shape:o.shape,tick:0,totalTicks:o.ticks,decay:o.decay,drift:o.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:o.gravity*3,ovalScalar:.6,scalar:o.scalar}}function rt(o,r){r.x+=Math.cos(r.angle2D)*r.velocity+r.drift,r.y+=Math.sin(r.angle2D)*r.velocity+r.gravity,r.wobble+=r.wobbleSpeed,r.velocity*=r.decay,r.tiltAngle+=.1,r.tiltSin=Math.sin(r.tiltAngle),r.tiltCos=Math.cos(r.tiltAngle),r.random=Math.random()+2,r.wobbleX=r.x+10*r.scalar*Math.cos(r.wobble),r.wobbleY=r.y+10*r.scalar*Math.sin(r.wobble);var p=r.tick++/r.totalTicks,f=r.x+r.random*r.tiltCos,v=r.y+r.random*r.tiltSin,y=r.wobbleX+r.random*r.tiltCos,d=r.wobbleY+r.random*r.tiltSin;return o.fillStyle="rgba("+r.color.r+", "+r.color.g+", "+r.color.b+", "+(1-p)+")",o.beginPath(),r.shape==="circle"?o.ellipse?o.ellipse(r.x,r.y,Math.abs(y-f)*r.ovalScalar,Math.abs(d-v)*r.ovalScalar,Math.PI/10*r.wobble,0,2*Math.PI):et(o,r.x,r.y,Math.abs(y-f)*r.ovalScalar,Math.abs(d-v)*r.ovalScalar,Math.PI/10*r.wobble,0,2*Math.PI):(o.moveTo(Math.floor(r.x),Math.floor(r.y)),o.lineTo(Math.floor(r.wobbleX),Math.floor(v)),o.lineTo(Math.floor(y),Math.floor(d)),o.lineTo(Math.floor(f),Math.floor(r.wobbleY))),o.closePath(),o.fill(),r.tick<r.totalTicks}function nt(o,r,p,f,v){var y=r.slice(),d=o.getContext("2d"),m,b,P=s(function(C){function x(){m=b=null,d.clearRect(0,0,f.width,f.height),v(),C()}function S(){i&&!(f.width===a.width&&f.height===a.height)&&(f.width=o.width=a.width,f.height=o.height=a.height),!f.width&&!f.height&&(p(o),f.width=o.width,f.height=o.height),d.clearRect(0,0,f.width,f.height),y=y.filter(function(g){return rt(d,g)}),y.length?m=h.frame(S):x()}m=h.frame(S),b=x});return{addFettis:function(C){return y=y.concat(C),P},canvas:o,promise:P,reset:function(){m&&h.cancel(m),b&&b()}}}function ge(o,r){var p=!o,f=!!_(r||{},"resize"),v=_(r,"disableForReducedMotion",Boolean),y=u&&!!_(r||{},"useWorker"),d=y?w():null,m=p?Je:Ke,b=o&&d?!!o.__confetti_initialized:!1,P=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,C;function x(g,X,G){for(var T=_(g,"particleCount",He),A=_(g,"angle",Number),D=_(g,"spread",Number),E=_(g,"startVelocity",Number),ot=_(g,"decay",Number),it=_(g,"gravity",Number),at=_(g,"drift",Number),be=_(g,"colors",Ze),ut=_(g,"ticks",Number),Ce=_(g,"shapes"),st=_(g,"scalar"),we=Ge(g),Me=T,J=[],ct=o.width*we.x,lt=o.height*we.y;Me--;)J.push(tt({x:ct,y:lt,angle:A,spread:D,startVelocity:E,color:be[Me%be.length],shape:Ce[Ye(0,Ce.length)],ticks:ut,decay:ot,gravity:it,drift:at,scalar:st}));return C?C.addFettis(J):(C=nt(o,J,m,X,G),C.promise)}function S(g){var X=v||_(g,"disableForReducedMotion",Boolean),G=_(g,"zIndex",Number);if(X&&P)return s(function(E){E()});p&&C?o=C.canvas:p&&!o&&(o=Qe(G),document.body.appendChild(o)),f&&!b&&m(o);var T={width:o.width,height:o.height};d&&!b&&d.init(o),b=!0,d&&(o.__confetti_initialized=!0);function A(){if(d){var E={getBoundingClientRect:function(){if(!p)return o.getBoundingClientRect()}};m(E),d.postMessage({resize:{width:E.width,height:E.height}});return}T.width=T.height=null}function D(){C=null,f&&t.removeEventListener("resize",A),p&&o&&(document.body.removeChild(o),o=null,b=!1)}return f&&t.addEventListener("resize",A,!1),d?d.fire(g,T,D):x(g,T,D)}return S.reset=function(){d&&d.reset(),C&&C.reset()},S}var Z;function _e(){return Z||(Z=ge(null,{useWorker:!0,resize:!0})),Z}n.exports=function(){return _e().apply(this,arguments)},n.exports.reset=function(){_e().reset()},n.exports.create=ge})(function(){return typeof window!="undefined"?window:typeof self!="undefined"?self:this||{}}(),B,!1);var Oe=B.exports,Re=B.exports.create,Se=Object.freeze(Object.defineProperty({__proto__:null,default:Oe,create:Re},Symbol.toStringTag,{value:"Module"})),Ee=I(Se),Q={exports:{}},l={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ee=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;function Pe(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function xe(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(t).map(function(u){return t[u]});if(i.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(u){a[u]=u}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Te=xe()?Object.assign:function(e,t){for(var n,i=Pe(e),a,u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)je.call(n,c)&&(i[c]=n[c]);if(ee){a=ee(n);for(var s=0;s<a.length;s++)ke.call(n,a[s])&&(i[a[s]]=n[a[s]])}}return i};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L=Te,j=60103,te=60106;l.Fragment=60107,l.StrictMode=60108,l.Profiler=60114;var re=60109,ne=60110,oe=60112;l.Suspense=60113;var ie=60115,ae=60116;if(typeof Symbol=="function"&&Symbol.for){var M=Symbol.for;j=M("react.element"),te=M("react.portal"),l.Fragment=M("react.fragment"),l.StrictMode=M("react.strict_mode"),l.Profiler=M("react.profiler"),re=M("react.provider"),ne=M("react.context"),oe=M("react.forward_ref"),l.Suspense=M("react.suspense"),ie=M("react.memo"),ae=M("react.lazy")}var ue=typeof Symbol=="function"&&Symbol.iterator;function Ie(e){return e===null||typeof e!="object"?null:(e=ue&&e[ue]||e["@@iterator"],typeof e=="function"?e:null)}function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var se={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ce={};function k(e,t,n){this.props=e,this.context=t,this.refs=ce,this.updater=n||se}k.prototype.isReactComponent={},k.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(F(85));this.updater.enqueueSetState(this,e,t,"setState")},k.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function le(){}le.prototype=k.prototype;function W(e,t,n){this.props=e,this.context=t,this.refs=ce,this.updater=n||se}var U=W.prototype=new le;U.constructor=W,L(U,k.prototype),U.isPureReactComponent=!0;var z={current:null},fe=Object.prototype.hasOwnProperty,de={key:!0,ref:!0,__self:!0,__source:!0};function he(e,t,n){var i,a={},u=null,c=null;if(t!=null)for(i in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(u=""+t.key),t)fe.call(t,i)&&!de.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var h=Array(s),w=0;w<s;w++)h[w]=arguments[w+2];a.children=h}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)a[i]===void 0&&(a[i]=s[i]);return{$$typeof:j,type:e,key:u,ref:c,props:a,_owner:z.current}}function Fe(e,t){return{$$typeof:j,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function q(e){return typeof e=="object"&&e!==null&&e.$$typeof===j}function Ne(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var pe=/\/+/g;function V(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ne(""+e.key):t.toString(36)}function N(e,t,n,i,a){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(u){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case j:case te:c=!0}}if(c)return c=e,a=a(c),e=i===""?"."+V(c,0):i,Array.isArray(a)?(n="",e!=null&&(n=e.replace(pe,"$&/")+"/"),N(a,t,n,"",function(w){return w})):a!=null&&(q(a)&&(a=Fe(a,n+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(pe,"$&/")+"/")+e)),t.push(a)),1;if(c=0,i=i===""?".":i+":",Array.isArray(e))for(var s=0;s<e.length;s++){u=e[s];var h=i+V(u,s);c+=N(u,t,n,h,a)}else if(h=Ie(e),typeof h=="function")for(e=h.call(e),s=0;!(u=e.next()).done;)u=u.value,h=i+V(u,s++),c+=N(u,t,n,h,a);else if(u==="object")throw t=""+e,Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function $(e,t,n){if(e==null)return e;var i=[],a=0;return N(e,i,"","",function(u){return t.call(n,u,a++)}),i}function $e(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}if(e._status===1)return e._result;throw e._result}var ye={current:null};function R(){var e=ye.current;if(e===null)throw Error(F(321));return e}var Ae={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:z,IsSomeRendererActing:{current:!1},assign:L};l.Children={map:$,forEach:function(e,t,n){$(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return $(e,function(){t++}),t},toArray:function(e){return $(e,function(t){return t})||[]},only:function(e){if(!q(e))throw Error(F(143));return e}},l.Component=k,l.PureComponent=W,l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ae,l.cloneElement=function(e,t,n){if(e==null)throw Error(F(267,e));var i=L({},e.props),a=e.key,u=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,c=z.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(h in t)fe.call(t,h)&&!de.hasOwnProperty(h)&&(i[h]=t[h]===void 0&&s!==void 0?s[h]:t[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){s=Array(h);for(var w=0;w<h;w++)s[w]=arguments[w+2];i.children=s}return{$$typeof:j,type:e.type,key:a,ref:u,props:i,_owner:c}},l.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:ne,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:re,_context:e},e.Consumer=e},l.createElement=he,l.createFactory=function(e){var t=he.bind(null,e);return t.type=e,t},l.createRef=function(){return{current:null}},l.forwardRef=function(e){return{$$typeof:oe,render:e}},l.isValidElement=q,l.lazy=function(e){return{$$typeof:ae,_payload:{_status:-1,_result:e},_init:$e}},l.memo=function(e,t){return{$$typeof:ie,type:e,compare:t===void 0?null:t}},l.useCallback=function(e,t){return R().useCallback(e,t)},l.useContext=function(e,t){return R().useContext(e,t)},l.useDebugValue=function(){},l.useEffect=function(e,t){return R().useEffect(e,t)},l.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},l.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},l.useMemo=function(e,t){return R().useMemo(e,t)},l.useReducer=function(e,t,n){return R().useReducer(e,t,n)},l.useRef=function(e){return R().useRef(e)},l.useState=function(e){return R().useState(e)},l.version="17.0.2",Q.exports=l;var De=O&&O.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Be=O&&O.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},ve=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(K,"__esModule",{value:!0});var Le=ve(Ee),H=ve(Q.exports),We=function(e){De(t,e);function t(n){var i=e.call(this,n)||this;return i.refCanvas=H.default.createRef(),i.confetti=null,i}return t.prototype.componentDidMount=function(){if(!!this.refCanvas.current){var n=this.props,i=n.resize,a=n.useWorker,u={resize:typeof i=="undefined"?!0:i,useWorker:typeof a=="undefined"?!0:a};this.confetti=Le.default.create(this.refCanvas.current,u),this.setRefConfetti()}},t.prototype.componentDidUpdate=function(n){var i=this.props,a=i.fire,u=i.reset,c=!!a,s=a!==n.fire;c&&s&&this.fireConfetti();var h=!!u,w=u!==n.reset;h&&w&&this.resetConfetti()},t.prototype.componentWillUnmount=function(){this.unsetRefConfetti()},t.prototype.setRefConfetti=function(){var n=this.props.refConfetti;n&&n(this.confetti)},t.prototype.unsetRefConfetti=function(){var n=this.props.refConfetti;n&&n(null)},t.prototype.fireConfetti=function(){if(!!this.confetti){var n=this.props,i=n.onFire,a=n.onDecay;n.onReset,n.className,n.style,n.width,n.height,n.refConfetti,n.fire,n.reset;var u=Be(n,["onFire","onDecay","onReset","className","style","width","height","refConfetti","fire","reset"]);i&&i();var c=this.confetti(u);c&&c.then(function(){a&&a()})}},t.prototype.resetConfetti=function(){if(!!this.confetti){this.confetti.reset();var n=this.props.onReset;n&&n()}},t.prototype.render=function(){var n=this.props,i=n.style,a=n.className,u=n.width,c=n.height;return H.default.createElement("canvas",{ref:this.refCanvas,style:i,className:a,width:u,height:c})},t}(H.default.Component),Ue=K.default=We,me={"Confetti-Box":"_Confetti-Box_4eufi_1",Button:"_Button_4eufi_1"};return({options:e})=>{const{mode:t="display"}=e,[n,i]=React.useState(),a=React.useRef();React.useEffect(()=>{n&&t==="display"&&c()},[n,t]);const u=React.useCallback((s,h)=>{a.current&&a.current({...h,origin:{y:.7},particleCount:Math.floor(200*s)})},[]),c=React.useCallback(()=>{u(.25,{spread:26,startVelocity:55}),u(.2,{spread:60}),u(.35,{spread:100,decay:.91,scalar:.8}),u(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),u(.1,{spread:120,startVelocity:45})},[u]);return React.createElement("div",{className:me["Confetti-Box"],ref:s=>{!s||n||i(s.getBoundingClientRect())}},t==="edit"&&React.createElement("div",null,React.createElement("button",{type:"button",onClick:c,className:me.Button},"\u89E6\u53D1\u7279\u6548")),n&&React.createElement(Ue,{refConfetti:s=>{a.current=s},style:{position:"fixed",pointerEvents:"none",width:n==null?void 0:n.width,height:"100%",top:0,left:n==null?void 0:n.left}}))}});
